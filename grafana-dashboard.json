{
  "dashboard": {
    "title": "Mock Server - Load Test Dashboard",
    "timezone": "browser",
    "refresh": "5s",
    "time": { "from": "now-15m", "to": "now" },
    "panels": [
      {
        "id": 1,
        "title": "HTTP 초당 요청 수 (RPS)",
        "type": "timeseries",
        "gridPos": { "x": 0, "y": 0, "w": 12, "h": 8 },
        "targets": [
          {
            "expr": "rate(http_server_requests_seconds_count{application=\"notification-mock-server\"}[30s])",
            "legendFormat": "{{method}} {{uri}} [{{status}}]"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "reqps",
            "custom": { "fillOpacity": 20 }
          }
        }
      },
      {
        "id": 2,
        "title": "HTTP 평균 응답시간 (초)",
        "type": "timeseries",
        "gridPos": { "x": 12, "y": 0, "w": 12, "h": 8 },
        "targets": [
          {
            "expr": "rate(http_server_requests_seconds_sum{application=\"notification-mock-server\"}[30s]) / rate(http_server_requests_seconds_count{application=\"notification-mock-server\"}[30s])",
            "legendFormat": "{{method}} {{uri}}"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "s",
            "custom": { "fillOpacity": 20 }
          }
        }
      },
      {
        "id": 3,
        "title": "Tomcat 쓰레드 (활성 / 최대)",
        "type": "timeseries",
        "gridPos": { "x": 0, "y": 8, "w": 12, "h": 8 },
        "targets": [
          {
            "expr": "tomcat_threads_busy_threads{application=\"notification-mock-server\"}",
            "legendFormat": "사용 중"
          },
          {
            "expr": "tomcat_threads_config_max_threads{application=\"notification-mock-server\"}",
            "legendFormat": "최대"
          },
          {
            "expr": "tomcat_threads_current_threads{application=\"notification-mock-server\"}",
            "legendFormat": "현재 생성됨"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "custom": { "fillOpacity": 10 }
          }
        }
      },
      {
        "id": 4,
        "title": "HTTP 에러율 (%)",
        "type": "timeseries",
        "gridPos": { "x": 12, "y": 8, "w": 12, "h": 8 },
        "targets": [
          {
            "expr": "rate(http_server_requests_seconds_count{application=\"notification-mock-server\",status=~\"5..\"}[30s]) / rate(http_server_requests_seconds_count{application=\"notification-mock-server\"}[30s]) * 100",
            "legendFormat": "5xx 에러율"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "percent",
            "custom": { "fillOpacity": 20 },
            "color": { "mode": "fixed", "fixedColor": "red" }
          }
        }
      },
      {
        "id": 5,
        "title": "JVM Heap 메모리 사용량",
        "type": "timeseries",
        "gridPos": { "x": 0, "y": 16, "w": 12, "h": 8 },
        "targets": [
          {
            "expr": "sum(jvm_memory_used_bytes{application=\"notification-mock-server\",area=\"heap\"})",
            "legendFormat": "사용 중"
          },
          {
            "expr": "sum(jvm_memory_max_bytes{application=\"notification-mock-server\",area=\"heap\"})",
            "legendFormat": "최대"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "bytes",
            "custom": { "fillOpacity": 10 }
          }
        }
      },
      {
        "id": 6,
        "title": "현재 동시 연결 수",
        "type": "timeseries",
        "gridPos": { "x": 12, "y": 16, "w": 12, "h": 8 },
        "targets": [
          {
            "expr": "tomcat_connections_current_connections{application=\"notification-mock-server\"}",
            "legendFormat": "현재 연결"
          },
          {
            "expr": "tomcat_connections_config_max_connections{application=\"notification-mock-server\"}",
            "legendFormat": "최대 연결"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "custom": { "fillOpacity": 10 }
          }
        }
      }
    ]
  },
  "overwrite": true
}
